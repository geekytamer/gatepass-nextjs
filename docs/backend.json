
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile in the system.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "role": {
          "type": "string",
          "enum": ["Admin", "Manager", "Security", "Visitor", "Worker", "Supervisor"],
          "description": "The role of the user in the system."
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the user's avatar image."
        },
        "company": {
          "type": "string",
          "description": "The name of the contractor company the user belongs to."
        },
        "contractorId": {
            "type": "string",
            "description": "The ID of the contractor company the user belongs to."
        }
      },
      "required": ["name", "email", "role", "avatarUrl"]
    },
    "AccessRequest": {
      "title": "Access Request",
      "description": "Represents a request for access to the premises, submitted by a supervisor.",
      "type": "object",
      "properties": {
        "supervisorId": { "type": "string", "description": "ID of the supervisor submitting the request." },
        "supervisorName": { "type": "string" },
        "operatorId": { "type": "string", "description": "ID of the operator company that owns the site." },
        "operatorName": { "type": "string" },
        "contractorId": { "type": "string", "description": "ID of the contractor company." },
        "contractorName": { "type": "string" },
        "siteId": { "type": "string" },
        "siteName": { "type": "string" },
        "contractNumber": { "type": "string" },
        "focalPoint": { "type": "string", "description": "Contact person at the operator company." },
        "workerIds": { "type": "array", "items": { "type": "string" }, "description": "List of worker user IDs included in the request." },
        "status": { "type": "string", "enum": ["Pending", "Approved", "Denied"] },
        "requestedAt": { "type": "string", "format": "date-time" },
        "validFrom": { "type": "string", "format": "date-time", "description": "The start date of the access validity period." },
        "expiresAt": { "type": "string", "format": "date-time", "description": "The end date of the access validity period. Can also be 'Permanent'." }
      },
      "required": ["supervisorId", "operatorId", "contractorId", "siteId", "contractNumber", "focalPoint", "workerIds", "status", "requestedAt"]
    },
    "GateActivity": {
      "title": "Gate Activity",
      "description": "Represents a check-in or check-out event at a gate.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "userName": { "type": "string" },
        "userAvatar": { "type": "string", "format": "uri" },
        "timestamp": { "type": "string", "format": "date-time" },
        "type": { "type": "string", "enum": ["Check-in", "Check-out"] },
        "gate": { "type": "string" },
        "siteId": { "type": "string" }
      },
      "required": ["userId", "userName", "userAvatar", "timestamp", "type", "gate", "siteId"]
    },
    "Site": {
        "title": "Site",
        "description": "Represents a physical location or site, owned by an Operator.",
        "type": "object",
        "properties": {
            "name": { "type": "string" },
            "operatorId": { "type": "string", "description": "The ID of the operator that owns this site." },
            "managerIds": { "type": "array", "items": { "type": "string" } },
            "requiredCertificates": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["name", "operatorId", "managerIds"]
    },
    "CertificateType": {
        "title": "Certificate Type",
        "description": "Represents a type of certificate that can be required.",
        "type": "object",
        "properties": {
            "name": { "type": "string" }
        },
        "required": ["name"]
    },
    "Operator": {
        "title": "Operator",
        "description": "Represents an operator company that owns sites.",
        "type": "object",
        "properties": {
            "name": { "type": "string" }
        },
        "required": ["name"]
    },
    "Contractor": {
        "title": "Contractor",
        "description": "Represents a contractor company that employs workers.",
        "type": "object",
        "properties": {
            "name": { "type": "string" }
        },
        "required": ["name"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores user profile information."
    },
    "/accessRequests/{requestId}": {
      "schema": { "$ref": "#/entities/AccessRequest" },
      "description": "Stores all access requests."
    },
    "/gateActivity/{activityId}": {
      "schema": { "$ref": "#/entities/GateActivity" },
      "description": "Logs all gate check-in and check-out activities."
    },
    "/sites/{siteId}": {
        "schema": { "$ref": "#/entities/Site" },
        "description": "Stores information about different sites."
    },
    "/certificateTypes/{certificateId}": {
        "schema": { "$ref": "#/entities/CertificateType" },
        "description": "Stores all manageable certificate types."
    },
    "/operators/{operatorId}": {
        "schema": { "$ref": "#/entities/Operator" },
        "description": "Stores all operator companies."
    },
    "/contractors/{contractorId}": {
        "schema": { "$ref": "#/entities/Contractor" },
        "description": "Stores all contractor companies."
    }
  }
}
